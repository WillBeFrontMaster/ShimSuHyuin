# Execution Context
실행 컨텍스트는 scope, hoisting, this, function, closure 등의 동작원리를 담고 있는 자바스크립트의 핵심원리이다.   
ECMAScript(자바스크립트의 토대를 구성하는 스크립트 언어) : 실행 가능한 코드를 형상화하고 구분하는 추상적인 개념. 즉, 실행 가능한 코드가 실행되기 위해 필요한 환경.   

실행 가능한 코드란?
- 전역 코드 : 전역 영역에 존재하는 코드
- 함수 코드 : 함수 내에 존재하는 코드
- Eval 코드 : eval 함수로 실행되는 코드(eval함수 : 문자열을 평가하는 함수로 거의 사용되지 않음)

코드를 실행할 때 필요한 정보들
- 변수 : 전역변수, 지역변수, 매개변수, 객체의 프로퍼티
- 함수 선언
- 변수의 유효범위(Scope)
- this

=>이 정보들을 형상화하고 구분하기 위해 JS엔진은 실행 컨텍스트를 물리적 객체의 형태로 관리한다.   
<br/>
      
```JS
var x = 'xxx';

function foo(){
	var y = 'yyy';
	
	function bar(){
		var z = 'zzz';
		console.log(x + y + z);
	}
	bar();
}
foo();
```
위 코드를 실행하는 동안 실행 컨텍스트 스택이 생성하고 소멸한다. 현재 실행 중인 컨텍스트에서 이 컨텍스트와 관련없는 코드(다른 함수 등)가 실행되면 새로운 컨텍스트가 생성된다.

push(global()) -> push(foo()) -> push(bar()) -> pop(bar()) -> pop(foo()) -> pop(global) (애플리케이션 종료시) <br/>
위와 같은 순서로 실행컨텍스트 스택에 쌓이게 되고, 컨트롤(제어권)이 이동한다.
<br/>
실행 컨텍스트는 추상적인 개념이지만 물리적으로는 객체의 형태를 가지며 3가지 프로퍼티를 소유한다.
1. Variable Object(변수 객체)
2. Scope chain
3. this Value

----------
### Variable Object(변수 객체)
변수 객체는 실행 컨텍스트가 생성될 때 자바스크립트 엔진이 실행에 필요한 여러 정보들을 담을 객체이며, <b>변수, 매개변수(parameter)와 인수정보(arguments), 함수 선언(함수 표현식 제외) 의 정보를 담고있다.

variable object 의 값은 다른 객체를 가리킨다.
전역 컨텍스트(전역 코드 실행시 생성)와 함수 컨텍스트(함수 코드 실행시 생성)의 경우, 가리키는 객체가 다르다.(전역 코드와 함수의 내용이 다르기 때문 - 전역 : 매개변수x, 함수 : 매개변수o)

- 전역 컨텍스트의 경우 : 
	VO는 유일하며 최상위에 위치하고 모든 전역 변수, 전역 함수 등을 포함하는 전역 객체(Global Object / GO)를 가리킨다.
	전역 객체는 전역에 선언된 전역 변수와 전역 함수를 프로퍼티로 소유한다.
- 함수 컨텍스트의 경우 : 
	VO는 활성 객체(Activation Object / AO)를 가리키며 매개변수와 인수들의 정보를 배열의 형태로 담고 있는 객체인 arguments object(함수 외부에서 사용불가능)가 추가된다.
<br/>
  
### Scope Chain
Scope Chain은 해당 전역 또는 함수가 참조할 수 있는 변수, 함수 선언 등의 정보를 담고 있는 전역 객체(GO) 또는 활성 객체(AO)의 리스트를 가리킨다.
현재 실행컨텍스트의 활성객체를 선두로 하여 순차적으로 상위 컨텍스트의 활성 객체를 가리키며 마지막 리스트는 전역 객체를 가리킨다.
<br/>
> 스코프 체인은 식별자 중에서 객체의 프로퍼티가 아닌 식별자(변수)를 검색하는 메커니즘이다.
>  : 변수가 아닌 개체의 프로퍼티를 검색하는 매커니즘은 프로토타입 체인이다.

자바스크립트 엔진은 스코프 체인을 통해 렉시컬 스코프(함수가 어디에 선언됐는지에 따른 스코프)를 파악한다.

함수가 중첩되어 있으면 중첩될 때마다 부모 함수의 스코프가 자식 함수의 스코프 체인에 포함된다.

함수 실행중에 변수를 만나면 그 변수를 현재 스코프(활성객체, AO)에서 검색해보고, 검색에 실패하면 스코프 체인에 담겨진 순서대로 검색을 이어나간다. -> 하위함수 내에서 상위함수의 스코프와 전역 스코프까지 참조할 수 있다.

전역  객체에서까지  검색을  실패하면  정의되지  않은 변수에  접근하는  것으로  판단하여 Reference Error를  발생시킨다.

### this value
this 프로퍼티에는 this 값이 할당된다. this에 할당되는 값은 함수 호출 패턴에 의해 결정된다.

-----------------
### 실행 컨텍스트의 생성 과정

```JS
var x = 'xxx';

function foo(){
	var y = 'yyy';
	
	function bar(){
	var z = 'zzz';
	console.log(x + y + z);
	}
	bar();
}
foo();	
```
위 코드의 실행 컨텍스트의 생성 과정을 보자고.
다음에 보도록 하자.
